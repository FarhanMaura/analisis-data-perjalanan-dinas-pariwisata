{% extends "base.html" %}

{% block title %}Edit User - Admin{% endblock %}

{% block content %}
<div class="container" style="margin-top: 40px; margin-bottom: 60px;">
  <div class="page-header" style="text-align: center; margin-bottom: 50px;">
    <h1 style="font-size: 3rem; color: var(--primary-blue); margin-bottom: 15px;">
      ‚úèÔ∏è Edit User
    </h1>
    <p style="color: var(--text-light); font-size: 1.2rem;">
      Update informasi user: {{ user.username }}
    </p>
  </div>

  <div class="upload-section" style="max-width: 600px; margin: 0 auto;">
    <form method="POST" class="upload-form">
      <div class="form-group">
        <label for="username">Username</label>
        <input
          type="text"
          id="username"
          name="username"
          value="{{ user.username }}"
          required
          placeholder="Masukkan username"
        />
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          value="{{ user.email }}"
          required
          placeholder="Masukkan email"
        />
      </div>

      <div class="form-group">
        <label for="role">Role</label>
        <select id="role" name="role" required>
          <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Admin</option>
          <option value="hotel" {% if user.role == 'hotel' %}selected{% endif %}>Hotel</option>
          <option value="tourism" {% if user.role == 'tourism' %}selected{% endif %}>Tourism</option>
        </select>
      </div>

      <div class="form-group">
        <label for="password">Password Baru (Opsional)</label>
        <input
          type="password"
          id="password"
          name="password"
          placeholder="Kosongkan jika tidak ingin mengubah password"
        />
        <small style="color: var(--text-light); font-size: 0.9rem; display: block; margin-top: 8px;">
          ‚ÑπÔ∏è Hanya isi jika ingin mengubah password
        </small>
      </div>

      <div style="display: flex; gap: 15px; margin-top: 40px;">
        <button type="submit" class="btn btn-primary" style="flex: 1;">
          <span>üíæ</span> Update User
        </button>
        <a href="{{ url_for('admin_users') }}" class="btn btn-secondary" style="flex: 1;">
          <span>‚ùå</span> Batal
        </a>
      </div>
    </form>
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div style="max-width: 600px; margin: 30px auto 0;">
        {% for category, message in messages %}
          <div class="flash-message flash-{{ category }}" style="padding: 15px 20px; border-radius: 12px; margin-bottom: 15px; display: flex; align-items: center; gap: 12px; font-weight: 600;">
            <i style="font-size: 1.5rem; font-style: normal;">
              {% if category == 'success' %}‚úÖ
              {% elif category == 'error' %}‚ùå
              {% elif category == 'warning' %}‚ö†Ô∏è
              {% else %}‚ÑπÔ∏è{% endif %}
            </i>
            <span>{{ message }}</span>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
</div>

<style>
.flash-success {
  background: linear-gradient(135deg, #d1fae5, #a7f3d0);
  color: #065f46;
  border: 1px solid #6ee7b7;
}

.flash-error {
  background: linear-gradient(135deg, #fee2e2, #fecaca);
  color: #991b1b;
  border: 1px solid #fca5a5;
}

.flash-warning {
  background: linear-gradient(135deg, #fef3c7, #fde68a);
  color: #92400e;
  border: 1px solid #fcd34d;
}

.flash-info {
  background: linear-gradient(135deg, #dbeafe, #bfdbfe);
  color: #1e40af;
  border: 1px solid #93c5fd;
}
</style>
{% endblock %}
