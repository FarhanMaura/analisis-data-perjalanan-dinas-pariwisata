{% extends "base.html" %}

{% block title %}Data Hotel - Admin{% endblock %}

{% block content %}
<div class="container" style="margin-top: 40px; margin-bottom: 60px;">
  <div class="page-header" style="text-align: center; margin-bottom: 50px;">
    <h1 style="font-size: 3rem; color: var(--primary-blue); margin-bottom: 15px;">
      ğŸ¨ Data Semua Hotel
    </h1>
    <p style="color: var(--text-light); font-size: 1.2rem;">
      Lihat semua data dari petugas hotel
    </p>
  </div>

  {% if data %}
  <div class="stats-summary" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px;">
    <div class="stat-card" style="background: linear-gradient(135deg, #3b82f6, #06b6d4); padding: 25px; border-radius: 16px; text-align: center; color: white;">
      <div style="font-size: 2.5rem; font-weight: bold; margin-bottom: 10px;">{{ data|length }}</div>
      <div style="font-size: 1rem; opacity: 0.9;">Total Entri</div>
    </div>
    <div class="stat-card" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); padding: 25px; border-radius: 16px; text-align: center; color: white;">
      <div style="font-size: 2.5rem; font-weight: bold; margin-bottom: 10px;">{{ data|map(attribute='guest_count')|sum }}</div>
      <div style="font-size: 1rem; opacity: 0.9;">Total Tamu</div>
    </div>
    <div class="stat-card" style="background: linear-gradient(135deg, #10b981, #059669); padding: 25px; border-radius: 16px; text-align: center; color: white;">
      <div style="font-size: 2.5rem; font-weight: bold; margin-bottom: 10px;">{{ data|map(attribute='occupied_rooms')|sum }}</div>
      <div style="font-size: 1rem; opacity: 0.9;">Total Kamar Terisi</div>
    </div>
  </div>

  <div style="text-align: center; margin-bottom: 30px;">
    <div style="display: inline-flex; gap: 15px; flex-wrap: wrap;">
      <a href="{{ url_for('admin_export_hotel_data', format='excel') }}" class="btn btn-primary">
        <span>ğŸ“Š</span> Export Excel
      </a>
      <a href="{{ url_for('admin_export_hotel_data', format='csv') }}" class="btn btn-primary">
        <span>ğŸ“„</span> Export CSV
      </a>
      <a href="{{ url_for('admin_export_hotel_data', format='pdf') }}" class="btn btn-primary">
        <span>ğŸ“•</span> Export PDF
      </a>
    </div>
  </div>

  <div class="data-table-container" style="background: white; border-radius: 16px; padding: 30px; box-shadow: 0 20px 40px rgba(30, 58, 138, 0.1);">
    <div style="overflow-x: auto;">
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background: linear-gradient(135deg, #1e3a8a, #06b6d4); color: white;">
            <th style="padding: 15px; text-align: left; font-weight: 600;">Tanggal</th>
            <th style="padding: 15px; text-align: left; font-weight: 600;">Hotel</th>
            <th style="padding: 15px; text-align: left; font-weight: 600;">Petugas</th>
            <th style="padding: 15px; text-align: center; font-weight: 600;">Kamar Terisi</th>
            <th style="padding: 15px; text-align: center; font-weight: 600;">Total Kamar</th>
            <th style="padding: 15px; text-align: center; font-weight: 600;">Okupansi</th>
            <th style="padding: 15px; text-align: center; font-weight: 600;">Jumlah Tamu</th>
          </tr>
        </thead>
        <tbody>
          {% for item in data %}
          <tr style="border-bottom: 1px solid #e2e8f0; transition: background 0.3s;" onmouseover="this.style.background='#f8fafc'" onmouseout="this.style.background='white'">
            <td style="padding: 15px;">{{ item.date }}</td>
            <td style="padding: 15px; font-weight: 600; color: var(--primary-blue);">{{ item.hotel_name }}</td>
            <td style="padding: 15px;">
              <span style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6; padding: 4px 12px; border-radius: 12px; font-size: 0.9rem; font-weight: 600;">
                {{ item.username }}
              </span>
            </td>
            <td style="padding: 15px; text-align: center; font-weight: 600;">{{ item.occupied_rooms }}</td>
            <td style="padding: 15px; text-align: center;">{{ item.total_rooms }}</td>
            <td style="padding: 15px; text-align: center;">
              <span style="background: {% if item.occupancy_rate >= 80 %}linear-gradient(135deg, #10b981, #059669){% elif item.occupancy_rate >= 50 %}linear-gradient(135deg, #f59e0b, #d97706){% else %}linear-gradient(135deg, #ef4444, #dc2626){% endif %}; color: white; padding: 6px 14px; border-radius: 20px; font-weight: 600; font-size: 0.9rem;">
                {{ item.occupancy_rate }}%
              </span>
            </td>
            <td style="padding: 15px; text-align: center; font-weight: 600; color: var(--secondary-blue);">{{ item.guest_count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% else %}
  <div style="text-align: center; padding: 80px 20px; background: linear-gradient(135deg, rgba(219, 234, 254, 0.6), rgba(224, 242, 254, 0.8)); border-radius: 16px;">
    <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ“Š</div>
    <h3 style="color: var(--primary-blue); margin-bottom: 10px;">Belum Ada Data</h3>
    <p style="color: var(--text-light);">Belum ada data hotel yang diinput oleh petugas</p>
  </div>
  {% endif %}

  <div style="margin-top: 40px; text-align: center;">
    <a href="{{ url_for('admin_home') }}" class="btn btn-secondary">
      â† Kembali ke Dashboard
    </a>
  </div>
</div>
{% endblock %}
